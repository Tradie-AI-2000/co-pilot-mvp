# Data Models: Co-Pilot

Co-Pilot uses Drizzle ORM to interface with a PostgreSQL database.

## Database Schema Overview

### 1. Core Entities

#### `clients`
Represents the companies (Asset Owners, Head Contractors) that Co-Pilot users interact with.
- **Fields**: `id`, `name`, `industry`, `status`, `tier`, `region`, `activeJobs`, `lastContact`, `financials` (JSONB), `keyContacts` (JSONB).

#### `projects`
Individual construction projects or service engagements.
- **Fields**: `id`, `name`, `clientId` (FK), `location`, `lat`, `lng`, `value`, `stage`, `status`, `startDate`, `completionDate`, `phases` (JSONB), `ppe` (JSONB).

#### `candidates`
The pool of talent available for placement.
- **Fields**: `id`, `firstName`, `lastName`, `email`, `phone`, `status`, `role`, `trade`, `chargeOutRate`, `internalRating`, `compliance` (JSONB).

### 2. Workflow & Operations

#### `placement_groups` & `placements`
Tracks the assignment of candidates to specific projects.
- **Placement Groups**: Groups multiple placements (e.g., a "Crew").
- **Placements**: Individual link between a candidate and a project group.

#### `nudges`
Proactive alerts generated by the logic engine.
- **Fields**: `id`, `type` (Enum), `priority` (Enum), `title`, `description`, `actionPayload` (JSONB), `consultantId` (FK).

### 3. Growth & Business Development

#### `leads`
Potential new business opportunities.
- **Fields**: `id`, `companyName`, `contactName`, `source`, `status`, `estimatedValue`.

#### `market_tenders`
Public or private tenders tracked for pursuit.
- **Fields**: `id`, `title`, `client`, `location`, `closingDate`, `isPursuing`.

## Enums
- **`placement_status`**: `draft`, `active`, `completed`, `cancelled`
- **`project_stage`**: `Won`, `Tender`, `Pipeline`, `Construction`, etc.
- **`nudge_type`**: `PRE_EMPTIVE_STRIKE`, `CHURN_INTERCEPTOR`, `ZOMBIE_HUNTER`, `CLIENT_STALKER`, `RAINMAKER`

## JSONB Usage
Co-Pilot extensively uses JSONB for flexible data storage within structured tables:
- **`financials`**: Stores YTD revenue and performance metrics.
- **`site_logistics`**: Stores site-specific requirements like PPE and induction details.
- **`action_payload`**: Stores dynamic data required for an AI agent or UI to action a nudge.